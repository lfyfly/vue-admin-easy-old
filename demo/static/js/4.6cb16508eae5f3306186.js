webpackJsonp([4],{Gu2p:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),l=a.n(o),r=a("880T"),i=a("9d1I"),s=a("gyMJ"),n={name:"users",components:{basicForm:r.a},data:function(){return{msg:"this is from users.vue",tableData:null,dialogForm:{title:"dialog 标题",show:!1,formComponent:"basic-form",form:{option:"",formData:{},formItems:[{name:"username",label:"昵称",options:["edit","create"],placeholder:"请输入昵称",rules:[{required:!0,message:"昵称不能为空",trigger:"blur"},{max:16,message:"昵称长度不能超过16个字符",trigger:"blur"}]},{name:"sign",label:"签名",options:["edit"],rules:[{max:200,message:"昵称长度不能超过200个字符",trigger:"blur"}]},{name:"email",label:"邮箱",placeholder:"请输入邮箱",options:["edit","create"],rules:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}]},{name:"phone",label:"手机",placeholder:"请输入手机",options:["edit","create"],rules:[{required:!0,message:"手机不能为空",trigger:"blur"},{validator:i.a.isPhone,trigger:"blur"}]},{name:"role",options:["edit","create"],label:"权限",component:"easy-select",componentData:[{value:"admin"},{value:"user"},{value:"guest"}],edit_disabled:!0}]}},states:[{value:0,label:"禁用"},{value:1,label:"审核"},{value:2,label:"启用"}]}},methods:{getTableData:function(){var e=this;s.a.users.get().then(function(t){console.log(t.data.data),e.tableData=t.data.data.filter(function(e){return-1!==e.state})})},switchState:function(e){console.log(e),s.a.users.put(e)},edit:function(e){this.dialogForm.title="编辑",this.dialogForm.form.option="edit",this.dialogForm.show=!0,this.dialogForm.form.formData=JSON.parse(l()(e))},create:function(e){this.dialogForm.title="新增",this.dialogForm.form.option="create",this.dialogForm.show=!0,this.dialogForm.form.formData={role:"user"}},del:function(e){confirm("确认删除")&&(e.state=-1,s.a.users.put(e),this.getTableData())},submit:function(){var e=this;s.a.users["编辑"===this.dialogForm.title?"put":"post"](this.dialogForm.form.formData).then(function(t){e.cancel(),"success"===t.data.type&&e.getTableData()})},cancel:function(){this.dialogForm.show=!1}},created:function(){this.getTableData()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-page users"},[a("h2",{staticClass:"table-title"},[e._v("用户表")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.create}},[e._v("新增")]),e._v(" "),e.tableData?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"权限"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{title:t.row.state?"启用中":"禁用中","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#909399"},on:{change:function(a){e.switchState(t.row)}},model:{value:t.row.state,callback:function(a){e.$set(t.row,"state",a)},expression:"scope.row.state"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row,t.$index)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),e.dialogForm.show?a("el-dialog",{attrs:{title:e.dialogForm.title,visible:e.dialogForm.show,width:"500px"},on:{"update:visible":function(t){e.$set(e.dialogForm,"show",t)}}},[a(e.dialogForm.formComponent,{tag:"component",attrs:{form:e.dialogForm.form},on:{submit:e.submit,cancel:e.cancel}})],1):e._e()],1)},staticRenderFns:[]};var u=a("VU/8")(n,c,!1,function(e){a("hsC5")},"data-v-25b31d4f",null);t.default=u.exports},hsC5:function(e,t){}});
//# sourceMappingURL=4.6cb16508eae5f3306186.js.map